<!DOCTYPE html>
<html lang="cs">

<head>
	<title>#1 Aproximace konstanty Pi pomocí Leibnizeovi řady</title>

	<link rel="stylesheet" href="https://latex.now.sh/style.min.css" />
	<link href="../css/prism.css" rel="stylesheet" />

	<meta charset="UTF-8">
	<meta name="description" content="Teoretická část Leibnizovi řady pro aproximaci pi">
	<meta name="keywords" content="marejak023, python, teorie">
	<meta name="author" content="Jakub Mareš, marejak023">

	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
		  tex2jax: {
			inlineMath: [ ['$','$'], ["\\(","\\)"] ],
			processEscapes: true
		  }
		});
	  </script>
</head>

<body>
	<script src="../js/prism.js"></script>

	<header>
		<h1><mark><a style="text-decoration: none; color: #000;" href="http://marejak023.wz.cz">marejak023</a></mark></h1>
		<p class="author">
			marejak023<br>
			17.01.2021
		</p>
		<hr>
	</header>

	<main>
		<h2>Úvod</h2>
		<p>Leibnizeovu řadu lze popsat následujícím způsobem:</p>
		$$\frac{\pi}{4} = \sum\limits_{n=0}^\infty\frac{(-1)^n}{2n+1} = \frac{1}{1}-\frac{1}{3}+\frac{1}{5}-\frac{1}{7}+\frac{1}{9}-\dots$$
		<p>Můžeme vidět, že ze zadání nám \(\pi\) vyjde v podílu 4, to lze upravit dosazením 4 do čitatele místo 1, poté dostaneme:</p>
		$$\pi = \frac{4}{1}-\frac{4}{3}+\frac{4}{5}-\frac{4}{7}+\frac{4}{9}-...$$
		<p>Co z toho lze vyčíst, vidíme, že ve jmenovateli se nachází číslo, které se s každým následujícím členem řady zvýší o hodnotu 2. Dále můžeme vidět, že mezi každým členem se mění znaménko, začínaje +. Důležité je uvědomit si fakt, že čím více členů řady bude, tím naše aproxiamce bude přesnější a zde lze narazit na problém, protože v základním tvaru může více desetinných čísel zabrat mnoho času na spočítání. Výhodou na druhou stranu je to, že použitím této řady lze dosáhnout velké přesnosti.</p>
		<p>Zrychlení výpočtu lze dosáhnout například užitím některé transformace pro řady s měnícími se znaménky (alternující řady), například Eulerovi transformace nebo Van Wijngaardenovi transformace, díky čemuž dostaneme vzorec:</p>
		$$\frac{\pi}{4} = \sum\limits_{n=0}^\infty\left(\frac{1}{4n+1}-\frac{1}{4n+3}\right) = \sum\limits_{n=0}^\infty\frac{2}{(4n+1)(4n+3)}$$
		<p>My ale zůstaneme u původního vzorce, protože ten je nejvíce požíván pro procvičování programování.</p>
		<p>Zde můžete vidět obrázek porovnávající užití některých transformací Leibnizeovi řady v závislosti na počtu členů a přesnosti:</p><br>

		<center>
		<img src="img/Comparison_pi_infinite_series.svg.png" alt="Comparison of different transformations used for Leibniz series">
		Porovnání transformací Leibnizeovi řady<sup>1</sup>
		</center>

		<h2>Zdrojový kód</h2>
		<p>Když za sebou máme teoretický úvod, tak můžeme začít programovat. Jako první si vytvoříme nový projekt <code>main.py</code>. Dále si importujeme knihovnu <code>math</code> (kvůli užití konstanty <code>math.pi()</code>) a inicializujeme proměnné <code>k</code> pro jmenovatel, <code>s</code> pro výsledek a vstup <code>sum_range</code> typu <code>int</code> pro počet členů:</p>
<pre><code class="language-python">import math

# formula: s = 4 - 4/3 + 4/5 - 4/7 + ...

k = 1 # denominator
s = 0 # sum

sum_range = int(input("\nEnter a range: ")) # range for the series</code></pre>

		<p>Pokud vás zajíma, proč všechny zdrojové kódy píšu a komentuji v angličtině, tak se na to brzy chystám přidat příspěvek. Jako další si připravíme <code>for loop</code> s naším uvedeným rozsahem, která již bude provádět samotný výpočet:</p>

<pre><code class="language-python">for i in range(sum_range):

# even numbers have + sign
if i % 2 == 0:
	s += 4/k
else:
	s -= 4/k
k += 2</code></pre>

		<p>Všiměte si, že změna znamének se provádí pomocí kontroly, zda je číslo sudé nebo liché (operace prováděna pomocí modulo operátoru <code>%</code>). Nyní máme výsledek uložený v proměnné <code>s</code> a jako další si budeme chtít spočítat procentuální chybu naší aproximace. Ta se spočítá podle vzorce:</p>

		$$ERROR[\%] = \frac{|E-T|}{|T|}\times100$$

		<p>Kde:</p>
		<ul type="none">
			<li><b>E</b> - naše aproximovaná hodnota (z angl. experimental value)</li>
			<li><b>T</b> - správná hodnota \(\pi\) (z angl. theoretical value)</li>
		</ul>

		<p>Adaptace pomocí kódu je následující:</p>

<pre><code class="language-python">error = ((s-math.pi)/math.pi)*100 # Percentage value of error</code></pre>

		<p><code>math.pi</code> je hodnota \(\pi\) z knihovny <code>math</code>. Nyní máme již všechny tři potřebné hodnoty (<code>s</code>, <code>math.pi</code>, <code>error</code>) uložené v proměnných a můžeme si je zobrazit:</p>

<pre><code class="language-python">print("\nApproximate value of pi using Liebniz series is: ", "{:.15f}".format(s))
print("Real value using math python constant math.pi is: ", math.pi)
print("Value of error in % is: ", abs(error), "%")
print("\nApproximate value is limited to 15 float digits, so it matches the internal float value of math.pi")</code></pre>

		<p>Všiměte si, že naše hodnota <code>s</code> je zaokrouhlena pomocí <code>"{:.15f}".format(s)</code> na 15 desetinných míst, to je kvůli tomu, že konstanta <code>math.pi</code> je interně také omezena na 15 desetinných míst, takže takto lze lépe spočítat hodnotu chyby. Nyní je náš kód připraven a my jej můžeme spustit:</p>

<pre><code class="language-cmd">C:\Users\marejak023> main.py
Enter a range: 100000

Approximate value of pi using Liebniz series is: 3.141582653589720
Real value using math python constant math.pi is:  3.141592653589793
Value of error in % is:  0.00031830988851828273 %

Approximate value is limited to 15 float digits, so it matches the internal float value of math.pi

C:\Users\marejak023>
</code></pre>

		<p>A to je vše, dokázali jsme aplikovat Leibniezovu řadu v Pythonu. Příště se pokusíme tuto řadu vynést do grafu pomocí <code>matplotlib</code> Python knihovny a zjistit graficky, jaká je závislost mezi počtem členů řady a přesnosti.</p>

		<h2>Reference</h2>
		[1] CMGLEE. wikipedia.cz [online]. [cit. 17.1.2021]. Dostupný na WWW: <a href="https://commons.wikimedia.org/wiki/File:Comparison_pi_infinite_series.svg" target="_blank">https://commons.wikimedia.org/wiki/File:Comparison_pi_infinite_series.svg </a>
		[2] Leibniz formula for pi. In: Wikipedia: the free encyclopedia [online]. San Francisco (CA): Wikimedia Foundation, 2001- [cit. 2021-01-17]. Dostupné z: <a href="https://en.wikipedia.org/wiki/Leibniz_formula_for_%CF%80" target="_blank">https://en.wikipedia.org/wiki/Leibniz_formula_for_%CF%80</a>

	</main>
</body>

</html>